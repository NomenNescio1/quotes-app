(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39412,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let a=e=>e[Math.floor(Math.random()*e.length)],l=e=>({content:a(e.phrases),author:e.name,image:e.portrait_path||""});function s(){let{quote:e,loading:s,error:i,refetch:c}=(()=>{let[e,t]=(0,r.useState)({quote:null,loading:!1,error:null}),s=(0,r.useRef)(null),i=(0,r.useRef)(null),c=(0,r.useRef)(null),u=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(c.current)return void t({quote:l(a(c.current)),loading:!1,error:null});s.current&&s.current.abort(),s.current=new AbortController,t(e=>o(n({},e),{loading:!0,error:null}));try{let e=await fetch("https://thesimpsonsapi.com/api/characters",{signal:s.current.signal,headers:{Accept:"application/json"}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let{results:r}=await e.json();if(!r||0===r.length)throw Error("Invalid response format");let n=r.filter(e=>e.phrases&&e.phrases.length>0&&e.name);if(0===n.length)throw Error("No valid quotes found");c.current=n,t({quote:l(a(n)),loading:!1,error:null})}catch(r){if("AbortError"===r.name)return;console.error("Failed to fetch quote:",r),e<3?i.current=setTimeout(()=>{u(e+1)},1e3*(e+1)):t({quote:null,loading:!1,error:"Failed to fetch quote after ".concat(3," attempts: ").concat(r.message)})}},[]),d=(0,r.useCallback)(()=>{u(0)},[u]),h=(0,r.useCallback)(()=>{s.current&&s.current.abort(),i.current&&clearTimeout(i.current)},[]);return(0,r.useEffect)(()=>(u(0),h),[u,h]),o(n({},e),{refetch:d,cleanup:h})})();(0,r.useEffect)(()=>{(null==e?void 0:e.image)&&document.documentElement.style.setProperty("--quote-image","url(".concat("https://cdn.thesimpsonsapi.com/500").concat(e.image,")"))},[e]);let u=()=>{c()},d=e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),u())};return(0,t.jsxs)("div",{className:"app",children:[(0,t.jsx)("header",{children:(0,t.jsx)("h2",{children:"The Simpsons Quote Generator v2"})}),(0,t.jsx)("main",{children:(0,t.jsx)("div",{className:"container quote-container",children:(0,t.jsxs)("div",{className:"quotes",children:[s&&(0,t.jsxs)("div",{className:"loading-indicator","aria-live":"polite",children:[(0,t.jsx)("span",{className:"loading-spinner","aria-hidden":"true"}),"Loading quote..."]}),i&&(0,t.jsxs)("div",{className:"error-message",role:"alert","aria-live":"assertive",children:[(0,t.jsx)("span",{className:"error-icon","aria-hidden":"true",children:"⚠️"}),i]}),e&&!s&&!i&&(0,t.jsxs)("div",{className:"quote-content",children:[(0,t.jsxs)("blockquote",{children:[(0,t.jsx)("p",{children:e.content}),(0,t.jsxs)("footer",{children:["— ",e.author]})]}),(0,t.jsx)("button",{className:"new-quote",onClick:u,onKeyDown:d,disabled:s,"aria-label":"Get a new Simpsons quote",type:"button",children:s?"Loading...":"Get new quote"})]}),!e&&!s&&!i&&(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)("p",{children:"No quote available"}),(0,t.jsx)("button",{className:"new-quote",onClick:u,onKeyDown:d,disabled:s,"aria-label":"Try loading a Simpsons quote",type:"button",children:"Try again"})]})]})})})]})}e.s(["default",()=>s],39412)},71996,e=>{e.n(e.i(39412))}]);